const API_KEY="aad3fab1607b552befd9a2ac37e556af",BASE_URL="https://api.themoviedb.org/3",IMG_BASE_URL="https://image.tmdb.org/t/p/original";function fetchDetails(e,t){fetch(`${BASE_URL}/${t}/${e}?api_key=${API_KEY}&append_to_response=videos`).then((e=>e.json())).then((e=>displayDetails(e,t))).catch((e=>console.error("Error:",e)))}function displayDetails(e,t){const n=document.querySelector(".backdrop-container"),a=document.getElementById("detail-poster"),o=document.getElementById("detail-title"),i=document.getElementById("detail-meta"),r=document.getElementById("detail-overview"),c=document.getElementById("watch-trailer-btn"),l=document.getElementById("watch-trailer-btn2"),s=document.getElementById("watch-trailer-btn3"),d=e.backdrop_path?IMG_BASE_URL+e.backdrop_path:"",m=e.poster_path?IMG_BASE_URL+e.poster_path:"",h=new Date(e.release_date||e.first_air_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});document.title=`${e.title||e.name} - Stream Now on JioStream`,n.style.backgroundImage=`url(${d})`,a.src=m,a.alt=e.title||e.name,o.textContent=e.title||e.name,i.innerHTML=`\n        <span>${h}</span> | \n        <span>${"movie"===t?e.runtime+" min":e.episode_run_time[0]+" min/episode"}</span> | \n        <span>${e.genres.map((e=>e.name)).join(", ")}</span>\n    `,r.textContent=e.overview,c.style.display="block",c.onclick=()=>toggleTrailer(t,e.id),l.style.display="block",l.onclick=()=>toggleTrailer2(t,e.id),s.style.display="block",s.onclick=()=>toggleTrailer3(t,e.id)}function toggleTrailer(e,t){const n=document.getElementById("trailer-container"),a=document.getElementById("trailer-container2"),o=document.getElementById("trailer-container3");a.classList.remove("active"),a.innerHTML="",o.classList.remove("active"),o.innerHTML="";let i="movie"===e?`https://vidsrc.dev/embed/movie/${t}`:`https://vidsrc.dev/embed/tv/${t}/1/1`;n.classList.add("active"),n.innerHTML=`<iframe src="${i}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`}function toggleTrailer2(e,t){const n=document.getElementById("trailer-container"),a=document.getElementById("trailer-container2"),o=document.getElementById("trailer-container3");n.classList.remove("active"),n.innerHTML="",o.classList.remove("active"),o.innerHTML="";let i="movie"===e?`https://hnembed.cc/embed/movie/${t}`:`https://hnembed.cc/embed/tv/${t}`;a.classList.add("active"),a.innerHTML=`<iframe src="${i}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`}function toggleTrailer3(e,t){const n=document.getElementById("trailer-container"),a=document.getElementById("trailer-container2"),o=document.getElementById("trailer-container3");n.classList.remove("active"),n.innerHTML="",a.classList.remove("active"),a.innerHTML="";let i="movie"===e?`https://multiembed.mov/?video_id=${t}&tmdb=1`:`https://multiembed.mov/?video_id=${t}&tmdb=1&s=1&e=1`;o.classList.add("active"),o.innerHTML=`<iframe src="${i}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`}function fetchRelatedContent(e,t){fetch(`${BASE_URL}/${t}/${e}/recommendations?api_key=${API_KEY}`).then((e=>e.json())).then((e=>displayRelatedContent(e.results.slice(0,10),t))).catch((e=>console.error("Error:",e)))}function displayRelatedContent(e,t){const n=document.getElementById("related-grid");n.innerHTML="",e.forEach((e=>{const a=document.createElement("div");a.className="movie-card";const o=e.poster_path?`${IMG_BASE_URL}/${e.poster_path}`:"",i=new Date(e.release_date||e.first_air_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),r=Math.round(10*e.vote_average);a.innerHTML=`\n            <img class="movie-poster" src="${o}" alt="${e.title||e.name}">\n            <div class="movie-info">\n                <h2 class="movie-title">${e.title||e.name}</h2>\n                <p class="movie-release-date">${i}</p>\n                <div class="movie-overview">${e.overview}</div>\n            </div>\n            <div class="movie-rating">${r}%</div>\n        `,a.addEventListener("click",(()=>{window.location.href=`detail.html?id=${e.id}&type=${t}`})),n.appendChild(a)}))}async function fetchDataWithExpiry(e,t=60){let n=`tmdb_${e}`,a=JSON.parse(localStorage.getItem(n));if(a&&Date.now()-a.timestamp<6e4*t)return console.log("Loading data from cache with expiry check"),a.data;try{let t=await fetch(`https://api.themoviedb.org/3/${e}`),a=await t.json();return localStorage.setItem(n,JSON.stringify({data:a,timestamp:Date.now()})),console.log("Data cached in localStorage with expiry"),a}catch(e){return console.error("Error fetching data:",e),null}}document.addEventListener("DOMContentLoaded",(()=>{const e=new URLSearchParams(window.location.search),t=e.get("id"),n=e.get("type");e.get("season"),e.get("episode"),t&&n&&(fetchDetails(t,n),fetchRelatedContent(t,n))})),document.addEventListener("DOMContentLoaded",(()=>{let e=new URLSearchParams(window.location.search),t=e.get("id"),n=e.get("type");e.get("season"),e.get("episode"),t&&n&&(fetchDetails(t,n),fetchRelatedContent(t,n))})),setInterval((()=>{(window.outerWidth-window.innerWidth>160||window.outerHeight-window.innerHeight>160)&&(alert("Developer tools are not allowed!"),window.location.href="https://jiostream.netlify.app")}),1e3),setInterval((()=>{}),5e3),document.addEventListener("contextmenu",(e=>e.preventDefault())),document.onkeydown=function(e){if(123===e.keyCode||e.ctrlKey&&e.shiftKey&&(73===e.keyCode||67===e.keyCode)||e.ctrlKey&&85===e.keyCode)return alert("Shortcut disabled!"),!1},function(){let e=!1,t=new Image;Object.defineProperty(t,"id",{get:function(){e=!0,setTimeout((()=>{e&&(window.location.href="https://jiostream.netlify.app")}),500)}}),console.log("%c ",t)}(),fetchDataWithExpiry("movie/popular").then((e=>{e&&console.log("Data loaded:",e)}));const lazyLoadImages=()=>{const e=document.querySelectorAll("img[data-src]"),t=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src,n.classList.remove("lazy"),t.unobserve(n)}}))}));e.forEach((e=>t.observe(e)))};var time,count,w=window.innerWidth,h=window.innerHeight,canvas=document.getElementById("test"),ctx=canvas.getContext("2d"),rate=60,arc=100,size=7,speed=20,parts=new Array,colors=["red","#f57900","yellow","#ce5c00","#5c3566"],mouse={x:0,y:0};function create(){time=0,count=0;for(var e=0;e<arc;e++)parts[e]={x:Math.ceil(Math.random()*w),y:Math.ceil(Math.random()*h),toX:5*Math.random()-1,toY:2*Math.random()-1,c:colors[Math.floor(Math.random()*colors.length)],size:Math.random()*size}}function particles(){ctx.clearRect(0,0,w,h),canvas.addEventListener("mousemove",MouseMove,!1);for(var e=0;e<arc;e++){var t=parts[e],n=DistanceBetween(mouse,parts[e]);n=Math.max(Math.min(15-n/10,10),1);ctx.beginPath(),ctx.arc(t.x,t.y,t.size*n,0,2*Math.PI,!1),ctx.fillStyle=t.c,ctx.strokeStyle=t.c,e%2==0?ctx.stroke():ctx.fill(),t.x=t.x+t.toX*(.05*time),t.y=t.y+t.toY*(.05*time),t.x>w&&(t.x=0),t.y>h&&(t.y=0),t.x<0&&(t.x=w),t.y<0&&(t.y=h)}time<speed&&time++,setTimeout(particles,1e3/rate)}function MouseMove(e){mouse.x=e.layerX,mouse.y=e.layerY}function DistanceBetween(e,t){var n=t.x-e.x,a=t.y-e.y;return Math.sqrt(n*n+a*a)}canvas.setAttribute("width",w),canvas.setAttribute("height",h),create(),particles();